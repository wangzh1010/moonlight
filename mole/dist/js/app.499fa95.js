(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(t,e,i){},57:function(t,e,i){"use strict";i.r(e);i(26),i(27),i(33),i(50);function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.score=0,this.level=2,this.maxScore=20,this.minScore=10,this.maxWidth=50,this.minWidth=30,this.offsetTop=5,this.cellSize=e,this.panelSize=i,this.moles=[],this.gameOver=!0,this.wrapper=document.createElement("div"),this.holes=Math.floor(this.panelSize/this.cellSize),this.initMoles()}var e,i,n;return e=t,(i=[{key:"init",value:function(){this.gameOver&&(this.gameOver=!1,this.score=0,this.level=2,window.requestAnimationFrame(this.start.bind(this)))}},{key:"start",value:function(){var t,e=this;if(this.moles.filter((function(t){return!1===t.active})).length){for(;!t;){var i=Math.floor(Math.random()*this.holes*this.holes);this.moles[i].active||(t=this.moles[i])}this.next(t),setTimeout((function(){e.gameOver||window.requestAnimationFrame(e.start.bind(e))}),300*this.level)}else window.requestAnimationFrame(this.start.bind(this))}},{key:"next",value:function(t){var e=this;t.active=!0,t.el.classList.remove("inactive"),t.el.classList.add("active"),new Promise((function(e){setTimeout((function(){t.el.classList.remove("active"),e()}),1500)})).then((function(){setTimeout((function(){t.active=!1;var i=e.getParams(),s=i.width,n=i.score,l=i.weight;t.score=n;var o=(s-t.el.offsetWidth)/2;t.el.style.width=s+"px",t.el.style.left=t.el.offsetLeft-o+"px",t.el.classList.remove(),t.el.setAttribute("class","mole "+l)}),500)}))}},{key:"knock",value:function(t,e){for(var i=0;i<this.moles.length;i++){var s=this.moles[i];s.domRect||(s.domRect=s.el.getBoundingClientRect());var n=s.domRect,l=n.top,o=n.bottom,a=n.left,c=n.right;if(t>a&&t<c&&e>l&&e<o&&s.active&&s.score>0){s.el.classList.add("inactive"),this.score+=s.score,s.score=0,this.score>150&&(this.level=1);break}}}},{key:"over",value:function(){this.gameOver=!0,this.moles.forEach((function(t){t.active=!1,t.el.classList.remove("active")}))}},{key:"initMoles",value:function(){for(var t=0;t<this.holes;t++)for(var e=0;e<this.holes;e++){var i=this.getParams(),s=i.width,n=i.score,l=i.weight,o=t*this.cellSize+(this.cellSize-s)/2,a=e*this.cellSize+this.offsetTop,c="m1e"+(10*o+10*a).toString(36),r=document.createElement("div");r.setAttribute("class","mole "+l),r.setAttribute(c,""),r.style.left=o+"px",r.style.top=a+"px",r.style.width=s+"px";var h=document.createElement("span");r.appendChild(h),this.wrapper.appendChild(r),this.moles.push({el:r,x:o,y:a,score:n,active:!1})}}},{key:"getParams",value:function(){var t=Math.ceil(Math.random()*(this.maxWidth-this.minWidth)+this.minWidth);t=t%2==0?t:t+1;var e=this.maxScore-(this.maxWidth-t)/2;return{width:t,score:e,weight:e===this.maxScore||e===this.minScore?"golden":e<=this.minScore+3?"thin":e<=this.minScore+6?"normal":"fat"}}},{key:"getStage",value:function(){return this.wrapper}},{key:"getScore",value:function(){return this.score}}])&&s(e.prototype,i),n&&s(e,n),t}();i(51);function l(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var o=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cellSize=e,this.stageSize=i,this.holes=Math.floor(this.stageSize/this.cellSize),this.stage=document.createElement("canvas"),this.cxt=this.stage.getContext("2d"),this.init()}var e,i,s;return e=t,(i=[{key:"init",value:function(){this.stage.width=this.stageSize,this.stage.height=this.stageSize,this.cxt.translate(.5,.5),this.drawCells(),this.drawHoles()}},{key:"drawCells",value:function(){this.cxt.strokeStyle="#9e9e9e",this.cxt.beginPath();for(var t=1;t<=this.holes-1;t++)this.cxt.moveTo(this.cellSize*t,0),this.cxt.lineTo(this.cellSize*t,this.stageSize),this.cxt.moveTo(0,this.cellSize*t),this.cxt.lineTo(this.stageSize,this.cellSize*t);this.cxt.stroke()}},{key:"drawHoles",value:function(){for(var t=0;t<this.holes;t++)for(var e=0;e<this.holes;e++){var i=t*this.cellSize+this.cellSize/2,s=e*this.cellSize+this.cellSize/2;this.cxt.beginPath(),this.cxt.ellipse(i,s,.48*this.cellSize,.3*this.cellSize,0,0,2*Math.PI),this.cxt.fillStyle="#e0e0e0",this.cxt.fill(),this.cxt.beginPath(),this.cxt.ellipse(i,s,.42*this.cellSize,.25*this.cellSize,0,0,2*Math.PI),this.cxt.fillStyle="#757575",this.cxt.fill()}}},{key:"getStage",value:function(){return this.stage}}])&&l(e.prototype,i),s&&l(e,s),t}(),a=30,c=document.querySelector(".panel"),r=c.getBoundingClientRect(),h=r.top,u=r.bottom,d=r.left,v=r.right,m=document.getElementById("start"),f=document.getElementById("counter");f.textContent=a;var g=document.getElementById("score");g.textContent=0;var p=document.querySelector(".hammer"),S=new o(100,400),x=new n(100,400);c.appendChild(S.getStage()),c.appendChild(x.getStage()),c.addEventListener("mousemove",(function(t){t.clientX<d||t.clientX>v||t.clientY<h||t.clientY>u||(p.style.top=t.clientY-60+"px",p.style.left=t.clientX-64+"px")})),c.addEventListener("mousedown",(function(t){p.classList.add("ding"),x.knock(t.clientX,t.clientY),g.textContent=x.getScore()})),c.addEventListener("touchstart",(function(t){p.classList.contains("ding")||(p.style.top=t.touches[0].clientY-60+"px",p.style.left=t.touches[0].clientX-64+"px",p.classList.add("ding")),x.knock(t.touches[0].clientX,t.touches[0].clientY),g.textContent=x.getScore()})),p.addEventListener("animationend",(function(){p.classList.remove("ding")})),m.addEventListener("click",(function(){m.setAttribute("disabled",""),x.init();var t=setInterval((function(){if(--a<0)return clearInterval(t),t=null,a=30,x.over(),void m.removeAttribute("disabled");f.textContent=a}),1e3)}))}},[[57,1,2]]]);